<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
    <link rel="stylesheet" href="/static/pico.min.css">
    <script src="/static/htmx.min.js" defer></script>

    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">

    <link rel="preload" as="font" href="/static/fa-solid-900.woff2" crossorigin>
    <link rel="preload" as="font" href="/static/fa-regular-400.woff2" crossorigin>
    <link rel="stylesheet" href="/static/fontawesome.min.css">
    <link rel="stylesheet" href="/static/solid.min.css">
    <link rel="stylesheet" href="/static/regular.min.css">

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            htmx.on('htmx:beforeSwap', function(evt) {
                if(evt.detail.xhr.status < 500){
                    evt.detail.shouldSwap = true;
                } else {
                    console.log(evt);
                    evt.detail.shouldSwap = true;
                    evt.detail.target = htmx.find("#error-dialog-message");
                    evt.detail.isError = true;
                    evt.detail.swapOverride = 'innerHTML'; // comes in htmx > 2.0.2

                    htmx.find("#error-dialog").showModal();
                }
            });
        });
    </script>
    <style>
        :root {
            --pico-color-light: #fff;
            --pico-color-dark: #000;

            --pico-color-red: #c52f21;
            --pico-color-amber: #ffbf00;
            --pico-color-jade: #00895a;

            --pico-color-violet: #7540bf;
        }

        .board {
            --pico-spacing: 0.5rem;

            select {
                width: 4.5rem;
                text-align: right;
                margin-bottom: 0;
                --pico-form-element-spacing-horizontal: 0.5rem;
                --pico-form-element-spacing-vertical: 0.25rem;
            }
            [data-tooltip] {
                border-bottom: var(--pico-border-width) solid var(--pico-table-border-color);
                text-decoration: underline dotted 1px;
            }
            .score {
                /* total column */
                text-align: right;
                font-size: 0.6rlh;
                div {
                    height: 1cap;
                    margin-bottom: 0.2lh; /* even vertical spacing in the table cell */
                    margin-left: auto;
                    border-radius: var(--pico-border-radius);
                    background-color: var(--score-color);
                }

                &.good { --score-color: var(--pico-color-jade); }
                &.medium { --score-color: var(--pico-color-amber); }
                &.bad { --score-color: var(--pico-color-red); }
                &.error { --score-color: var(--pico-color-violet); }
            }
        }
    </style>

    {% block head %}{% endblock %}
</head>
<body hx-boost="true">
    {% block markup %}{% endblock %}
    <dialog id="error-dialog">
        <blockquote id="error-dialog-message"></blockquote>
        <button formmethod="dialog">Close</button>
    </dialog>
</body>
</html>
